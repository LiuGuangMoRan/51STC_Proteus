C51 COMPILER V9.54   BETTER_NIXIE                                                          10/27/2023 15:44:19 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BETTER_NIXIE
OBJECT MODULE PLACED IN .\Objects\Better_Nixie.obj
COMPILER INVOKED BY: D:\c51\C51\BIN\C51.EXE Better_Nixie.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -Better_Nixie.lst) TABS(2) OBJECT(.\Objects\Better_Nixie.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          /** 
   4            * @brief  2.æ¨¡å—åŒ–æ•°ç ç®¡æ“ä½œ
   5            * @param  NumberæŽ§åˆ¶æ•°ç ç®¡æ˜¾ç¤ºçš„æ•°å­—(å‡½æ•°NixieTable)ï¼ŒLocationé€‰æ‹©å¯¹åº”çš„æ•°ç ç®¡ï¼ŒNu
             -mberä½œç”¨æ•ˆæžœ(Nixie)
   6            * @retval NixieTable(Number)æŽ§åˆ¶æ•°ç ç®¡æ˜¾ç¤ºæ•°å€¼,Nixie(Location,Number)æŽ§åˆ¶é€‰å®šæ•°ç ç®¡
   7            * @explain P0ç«¯æŽ§åˆ¶æ˜¾ç¤ºå¯¹åº”æ•°å€¼ï¼ŒP2_2 ~ P2_4æŽ§åˆ¶æ•°ç ç®¡çš„é€‰æ‹©ï¼Œé€šè¿‡3ä¸ªç«¯å£è¾“å…¥ä
             -ºŒè¿›åˆ¶ä»£ç ï¼Œç”¨è¯‘ç å™¨è¾“å‡º8ç§çŠ¶æ€      
   8            */
   9          
  10          //æ•°ç ç®¡æ˜¾ç¤ºç¼“å­˜åŒº
  11          unsigned char Nixie_Buf[9]={0,10,10,10,10,10,10,10,10};
  12          
  13          //æ•°ç ç®¡æ®µç è¡¨
  14          unsigned char NixieTable[]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x00,0x40};
  15          
  16          /**
  17           * åŒ…å«ä½¿ç”¨å®šæ—¶å™¨å’Œä¸ä½¿ç”¨å®šæ—¶å™¨ä¸¤ç§:
  18           * 1.ä¸ä½¿ç”¨å®šæ—¶å™¨ï¼Œä½¿ç”¨Nixie()å‡½æ•°è°ƒç”¨ï¼Œé€‰å®šå›ºå®šä½ç½®æ•°ç ç®¡æ˜¾ç¤ºæ•°å€¼ï¼Œä½†å¤šä½é
             -€‰é€‰æ‹©ä»éœ€è¦æ·»åŠ å‡½æ•°è¡¥å……
  19           * 2.ä½¿ç”¨å®šæ—¶å™¨(åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨ä¸­æ–­å‡½æ•°Nixie_Loop()),è¯¥å‡½æ•°èƒ½å¤ŸåŒæ—¶æ˜¾ç¤ºå¤šä¸ª(å…·ä
             -½“è®¾ç½®Nixie_Loop()çš„forå¾ªçŽ¯)
  20           * 
  21          */
  22          
  23          
  24          //æŽ§åˆ¶é€‰å®šæ•°ç ç®¡
  25          void Nixie(unsigned char Location,unsigned char Number)
  26          { P1=0x00;
  27   1         switch(Location)
  28   1        {
  29   2          case 1: P2_4=1;P2_3=1;P2_2=1;break;
  30   2          case 2: P2_4=1;P2_3=1;P2_2=0;break;
  31   2          case 3: P2_4=1;P2_3=0;P2_2=1;break;
  32   2          case 4: P2_4=1;P2_3=0;P2_2=0;break;
  33   2          case 5: P2_4=0;P2_3=1;P2_2=1;break;
  34   2          case 6: P2_4=0;P2_3=1;P2_2=0;break;
  35   2          case 7: P2_4=0;P2_3=0;P2_2=1;break;
  36   2          case 8: P2_4=0;P2_3=0;P2_2=0;break;
  37   2        }
  38   1        P1=NixieTable[Number];  //æ®µç è¾“å‡º
  39   1      }
  40          
  41          
  42          void Nixie_Loop(void)
  43          {
  44   1        static unsigned char i = 1;
  45   1        Nixie(i,Nixie_Buf[i]);
  46   1        i++;
  47   1        if(i>=9){i=1;}
  48   1      }
  49          
  50          void Nixie_SetBuf(unsigned char Location,Number)
C51 COMPILER V9.54   BETTER_NIXIE                                                          10/27/2023 15:44:19 PAGE 2   

  51          {
  52   1        Nixie_Buf[Location] = Number;
  53   1      }
  54          
  55          //ä¸»å‡½æ•°è°ƒç”¨å®šæ—¶å™¨æ¨¡æ¿
  56          
  57          /*
  58          void Timer0_Routine() interrupt 1
  59          {
  60              static unsigned int T0Count1;
  61              TL0  = 0x18;
  62              TH0  = 0xFC;
  63              T0Count1++;
  64              if (T0Count1>=20)       //å®šæ—¶20msæ‰§è¡ŒNixie_Loop()
  65              {
  66                 T0Count1 = 0;
  67                 Nixie_Loop();
  68              }     
  69          }
  70          */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    136    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
