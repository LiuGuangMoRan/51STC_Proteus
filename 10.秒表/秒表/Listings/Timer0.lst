C51 COMPILER V9.54   TIMER0                                                                10/27/2023 15:44:19 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TIMER0
OBJECT MODULE PLACED IN .\Objects\Timer0.obj
COMPILER INVOKED BY: D:\c51\C51\BIN\C51.EXE Timer0.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Timer0
                    -.lst) TABS(2) OBJECT(.\Objects\Timer0.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          /**
   4            * @brief  å®šæ—¶å™¨0åˆå§‹åŒ–
   5            * @param  æ— 
   6            * @retval Timer0_Init()å¯åŠ¨å®šæ—¶å™¨ï¼Œè®¾ç½®å·¥ä½œæ¨¡å¼ï¼Œè®¾ç½®å®šæ—¶åˆå€¼
   7            */
   8          
   9          void Timer0_Init()
  10          {
  11   1        TMOD=0x01;  //ä¸å¯å¯»å€,æ§åˆ¶å®šæ—¶å™¨çš„æ¨¡å¼ä¸ºæ¨¡å¼ä¸€,TMONä¸ºåŠŸèƒ½å¯„å­˜å™¨
  12   1        
  13   1        //ä¸‹é¢ä¸ºTCONæ§åˆ¶è®¡æ•°å™¨,è·³å˜æ–¹å¼
  14   1        
  15   1        TF0=0;      //ç¡¬ä»¶ç½®1æˆ–ç½®0ï¼Œæ¸…é™¤TF0æ ‡å¿—
  16   1        TR0=1;      //è½¯ä»¶ç½®1æˆ–ç½®0ï¼Œå®šæ—¶å™¨0å¼€å§‹è®¡æ—¶
  17   1        
  18   1        //æ§åˆ¶è®¡ç®—å™¨ä¸º1msè¿›è¡Œè·³å˜,å°±è¦æ”¹å˜TH0,TL0çš„å€¼
  19   1        //64535ä½åè¿›åˆ¶æ•°,256ä¸º16çš„2æ¬¡æ–¹,æ‰€ä»¥64535å˜æˆåå…­è¿›åˆ¶æ•°,å†å˜æˆ8ä½
  20   1        //äºŒè¿›åˆ¶æ•°
  21   1        
  22   1        //TH0=64535/256;//è·å–å‰8ä½çš„æ•°å€¼
  23   1        //TL0=64535%256;//è·å–å8ä½çš„æ•°å€¼
  24   1        
  25   1          //ç›´æ¥é‡‡ç”¨16è¿›åˆ¶èµ‹å€¼
  26   1          TH0 = 0xFC; 
  27   1          TL0 = 0x18;
  28   1      
  29   1        //æ§åˆ¶ä¸­æ–­ç³»ç»Ÿ,æ‰§è¡Œä¸­æ–­ç¨‹åº
  30   1        ET0=1;
  31   1        EA=1;
  32   1        PT0=0;
  33   1        
  34   1      }
  35          
  36          /**
  37            * @brief  æ‰§è¡Œä¸­æ–­ç¨‹åº(æ”¾åœ¨mainå‡½æ•°ä¸­)
  38            * @param  æ— 
  39            * @retval Timer0_Routine() interrupt 1  å½“å®šæ—¶å™¨è®¡æ•°å®Œæ¯•ï¼Œè·³è¿‡å½“å‰ç¨‹åºï¼Œæ‰§è¡Œä¸­æ–­ç¨‹å
             -º
  40            */
  41          
  42          //ä¸»å‡½æ•°è°ƒç”¨å®šæ—¶å™¨æ¨¡æ¿
  43          
  44          /*
  45          void Timer0_Routine() interrupt 1   //åˆå§‹å€¼ä¸º1ms
  46          {
  47              static unsigned int T0Count1;
  48              TL0  = 0x18;
  49              TH0  = 0xFC;
  50              T0Count1++;
  51              if (T0Count1>=)       //å®šæ—¶ï¼Ÿå¤šå°‘msæ‰§è¡Œä¸­æ–­ç³»ç»Ÿ
  52              {
  53                
C51 COMPILER V9.54   TIMER0                                                                10/27/2023 15:44:19 PAGE 2   

  54              }     
  55          }
  56          */
  57           
  58          
  59          
  60          /**
  61            * @brief  åˆå§‹åŒ–å®šæ—¶å™¨(åŠŸèƒ½æ˜¯ä¸è§¦å‘ä¸­æ–­,ä¸å·¥ä½œ)ï¼Œåªéœ€å®Œæˆè®¡æ•°å·¥ä½œï¼Œå®Œæˆéœ€è
             -¦å…¶ä»–å‡½æ•°
  62            * @param  æ— 
  63            * @retval æ— 
  64            */
  65          void Timer0_Init_NoWork()
  66          {
  67   1        TMOD&=0xF0;   
  68   1        TMOD|=0x01;
  69   1        TH0=0;
  70   1        TL0=0;
  71   1        TF0=0;      
  72   1        TR0=0;      
  73   1      }
  74          
  75          /**
  76            * @brief  è®¾ç½®å®šæ—¶å™¨çš„åˆå€¼
  77            * @param  valueè®¾ç½®å®šæ—¶å™¨åˆå€¼ï¼Œé€šè¿‡/%å¾—åˆ°å‰8ä½å’Œå8ä½
  78            * @retval æ— 
  79            */
  80          void Timer0_SetCounter(unsigned int Value)
  81          {
  82   1        TH0 = Value/256;
  83   1        TL0 = Value%256;
  84   1      }
  85          
  86          /**
  87            * @brief  å¾—åˆ°å®šæ—¶å™¨çš„è®¡æ•°ç‚¹
  88            * @param  æ— 
  89            * @retval è¿”å›çš„æ˜¯ä»¥usä½œä¸ºå•ä½çš„è®¡æ•°ç‚¹
  90            */
  91          unsigned int Timer0_GetCounter(void)
  92          {
  93   1        return (TH0<<8)|TL0;
  94   1      }
  95          
  96          /**
  97            * @brief  æ§åˆ¶å®šæ—¶å™¨å·¥ä½œçŠ¶æ€
  98            * @param  Flayæ§åˆ¶å®šæ—¶å™¨çš„å¼€å…³
  99            * @retval æ— 
 100            */
 101          void Timer0_Run(unsigned char Flag)
 102          {
 103   1        TR0 = Flag;
 104   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     62    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.54   TIMER0                                                                10/27/2023 15:44:19 PAGE 3   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
